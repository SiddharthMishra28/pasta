DO $$
DECLARE
    r RECORD;
BEGIN
    FOR r IN
        SELECT tablename
        FROM pg_tables
        WHERE schemaname = 'source_schema'
    LOOP
        EXECUTE format(
            'CREATE TABLE target_schema.%I (LIKE source_schema.%I INCLUDING ALL);',
            r.tablename,
            r.tablename
        );

        EXECUTE format(
            'INSERT INTO target_schema.%I SELECT * FROM source_schema.%I;',
            r.tablename,
            r.tablename
        );
    END LOOP;
END $$;
